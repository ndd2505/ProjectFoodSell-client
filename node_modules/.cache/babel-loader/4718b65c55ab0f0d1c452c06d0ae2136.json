{"ast":null,"code":"var _jsxFileName = \"/Users/DuyNguyen/workspace/ProjectFoodSell-client/src/component/Modify Data/Update-User.js\";\nimport React from 'react';\nimport './Adding.css';\nimport ErrorIcon from '@material-ui/icons/Error';\n\nclass UpdateUser extends React.Component {\n  constructor(props) {\n    super(props);\n    this.updateid = this.props.match.params.id;\n\n    this.handleInput = e => {\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n    };\n\n    this.validClient = func => {\n      let usernameError = \"\";\n      let passwordError = \"\";\n      let hotenError = \"\";\n      let emailError = \"\";\n      let roleError = \"\";\n\n      if (this.state.username === \"\") {\n        usernameError = \"Vui lòng cung cấp username\";\n      } else {\n        if (this.state.username.split(\"\")[0] !== \"@\") {\n          usernameError = \"username không đúng định dạng. Kí tự đầu tiên phải là @\";\n        }\n      }\n\n      if (this.state.password === \"\") {\n        passwordError = \"password không được bỏ trống \";\n      }\n\n      if (this.state.hoten === \"\") {\n        hotenError = \"Vui lòng cung cấp họ tên \";\n      }\n\n      if (this.state.email === \"\") {\n        emailError = \"Vui lòng cung cấp Email\";\n      } else {\n        if (!this.state.email.includes(\"@gmail.com\")) {\n          emailError = \"email không hợp lệ. Vui lòng sử dụng địa chỉ gmail\";\n        }\n      }\n\n      if (this.state.role === \"\") {\n        roleError = \"Vui lòng chọn quyền truy cập\";\n      }\n\n      if (usernameError || passwordError || hotenError || emailError || roleError) {\n        this.setState({\n          usernameError,\n          passwordError,\n          hotenError,\n          emailError,\n          roleError\n        });\n        return false;\n      } else {\n        return func();\n      }\n    };\n\n    this.validServer = () => {\n      fetch(\"/valid-adduser\", {\n        method: \"post\",\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          \"username\": this.state.username,\n          \"email\": this.state.email\n        })\n      }).then(res => res.json()).then(row => this.setState({\n        emailError: row.email,\n        usernameError: row.username\n      })).then(() => {\n        if (this.state.emailError || this.state.usernameError) {\n          console.log(\"failed\");\n        } else {\n          return this.handleSubmit();\n        }\n      });\n    };\n\n    this.handleSubmit = () => {\n      fetch(\"/add-user\", {\n        method: \"post\",\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          \"username\": this.state.username,\n          \"password\": this.state.password,\n          \"hoten\": this.state.hoten,\n          \"email\": this.state.email,\n          \"role\": this.state.role\n        })\n      }).then(() => window.location.replace(\"http://localhost:3000/admin/user\"));\n    };\n\n    this.state = {\n      username: \"\",\n      password: \"\",\n      hoten: \"\",\n      email: \"\",\n      role: \"\",\n      innitialEmail: \"\",\n      innitialUsername: \"\",\n      usernameError: \"\",\n      passwordError: \"\",\n      hotenError: \"\",\n      emailError: \"\",\n      roleError: \"\"\n    };\n  }\n\n  componentDidMount() {\n    fetch('/update-user/' + this.updateid).then(res => res.json()).then(row => this.setState({\n      username: row[0].username,\n      password: row[0].password,\n      hoten: row[0].hoten,\n      email: row[0].email,\n      role: row[0].role\n    }));\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      style: {\n        textAlign: \"center\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, \"UpdateUser\"), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      style: {\n        fontSize: \"1.3vw\",\n        color: \"white\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, \"Username\"), React.createElement(\"input\", {\n      name: \"username\",\n      className: \"form-control\",\n      type: \"text\",\n      value: this.state.username,\n      onChange: e => this.handleInput(e),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      style: {\n        textAlign: \"left\",\n        color: \"red\",\n        fontSize: \"1.2vw\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, this.state.usernameError ? React.createElement(ErrorIcon, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }) : null, this.state.usernameError)), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      style: {\n        fontSize: \"1.3vw\",\n        color: \"white\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, \"Password\"), React.createElement(\"input\", {\n      name: \"password\",\n      className: \"form-control\",\n      type: \"text\",\n      value: this.state.password,\n      onChange: e => this.handleInput(e),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      style: {\n        textAlign: \"left\",\n        color: \"red\",\n        fontSize: \"1.2vw\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, this.state.passwordError ? React.createElement(ErrorIcon, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }) : null, this.state.passwordError)), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      style: {\n        fontSize: \"1.3vw\",\n        color: \"white\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, \"Hoten\"), React.createElement(\"input\", {\n      name: \"hoten\",\n      className: \"form-control\",\n      type: \"text\",\n      value: this.state.hoten,\n      onChange: e => this.handleInput(e),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      style: {\n        textAlign: \"left\",\n        color: \"red\",\n        fontSize: \"1.2vw\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, this.state.hotenError ? React.createElement(ErrorIcon, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }) : null, this.state.hotenError)), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      style: {\n        fontSize: \"1.3vw\",\n        color: \"white\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }, \"Email\"), React.createElement(\"input\", {\n      name: \"email\",\n      className: \"form-control\",\n      type: \"text\",\n      value: this.state.email,\n      onChange: e => this.handleInput(e),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      style: {\n        textAlign: \"left\",\n        color: \"red\",\n        fontSize: \"1.2vw\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }, this.state.emailError ? React.createElement(ErrorIcon, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }) : null, this.state.emailError)), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      style: {\n        fontSize: \"1.3vw\",\n        color: \"white\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }, \"Vai tr\\xF2\"), React.createElement(\"select\", {\n      name: \"role\",\n      className: \"form-control\",\n      value: this.state.role,\n      onChange: e => this.handleInput(e),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }, React.createElement(\"option\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }), React.createElement(\"option\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }, \"superadmin\"), React.createElement(\"option\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }, \"admin\")), React.createElement(\"div\", {\n      style: {\n        textAlign: \"left\",\n        color: \"red\",\n        fontSize: \"1.2vw\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }, this.state.roleError ? React.createElement(ErrorIcon, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }) : null, this.state.roleError)), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"btn btn-danger\",\n      onClick: () => window.location.replace(\"http://localhost:3000/admin/user\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }, \"Cancel\"), React.createElement(\"button\", {\n      className: \"btn btn-primary\",\n      onClick: () => this.validClient(this.validServer),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }, \"Update\")));\n  }\n\n}\n\nexport default UpdateUser;","map":{"version":3,"sources":["/Users/DuyNguyen/workspace/ProjectFoodSell-client/src/component/Modify Data/Update-User.js"],"names":["React","ErrorIcon","UpdateUser","Component","constructor","props","updateid","match","params","id","handleInput","e","setState","target","name","value","validClient","func","usernameError","passwordError","hotenError","emailError","roleError","state","username","split","password","hoten","email","includes","role","validServer","fetch","method","headers","body","JSON","stringify","then","res","json","row","console","log","handleSubmit","window","location","replace","innitialEmail","innitialUsername","componentDidMount","render","textAlign","fontSize","color"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './Adding.css';\nimport ErrorIcon from '@material-ui/icons/Error';\n\nclass UpdateUser extends React.Component{\n\n    constructor(props){\n        super(props);\n        this.state={\n            username: \"\",\n            password: \"\",\n            hoten: \"\",\n            email: \"\",\n            role: \"\",\n            innitialEmail:\"\",\n            innitialUsername:\"\",\n            usernameError: \"\",\n            passwordError: \"\",\n            hotenError: \"\",\n            emailError: \"\",\n            roleError:\"\"\n        }\n    }\n\n    updateid = this.props.match.params.id\n\n    componentDidMount(){\n        fetch('/update-user/'+this.updateid)\n        .then((res) => res.json())\n        .then((row) => this.setState({username: row[0].username, password: row[0].password , hoten: row[0].hoten , email: row[0].email, role: row[0].role}))\n    }\n\n    handleInput=(e)=>{\n        this.setState({[e.target.name]: e.target.value})\n    }\n\n    validClient= (func) =>{\n\n        let usernameError= \"\";\n        let passwordError= \"\";\n        let hotenError= \"\";\n        let emailError= \"\";\n        let roleError=\"\";\n\n        if(this.state.username === \"\"){\n            usernameError = \"Vui lòng cung cấp username\"\n        }else{\n            if(this.state.username.split(\"\")[0] !== \"@\"){\n                usernameError = \"username không đúng định dạng. Kí tự đầu tiên phải là @\"\n            }\n        }\n        \n        if(this.state.password === \"\"){\n            passwordError = \"password không được bỏ trống \"\n        }\n        if(this.state.hoten === \"\"){\n            hotenError = \"Vui lòng cung cấp họ tên \"\n        }if(this.state.email === \"\"){\n            emailError = \"Vui lòng cung cấp Email\"\n        }else{\n            if(!this.state.email.includes(\"@gmail.com\")){\n                emailError = \"email không hợp lệ. Vui lòng sử dụng địa chỉ gmail\"\n            }\n        }\n        if(this.state.role === \"\"){\n            roleError = \"Vui lòng chọn quyền truy cập\"\n        }\n\n        if( usernameError || passwordError || hotenError || emailError || roleError){\n            this.setState({usernameError , passwordError , hotenError , emailError, roleError})\n            return false\n        }else{\n            return func()\n        }\n    }\n\n    validServer = () =>{\n        fetch(\"/valid-adduser\", {\n            method:\"post\",\n            headers:{'Content-Type':'application/json'},\n            body: JSON.stringify({\n                \"username\": this.state.username,\n                \"email\": this.state.email\n            })\n        })\n        .then((res)=> res.json())\n        .then((row)=> this.setState({emailError: row.email, usernameError: row.username}))\n        .then(()=>{if(this.state.emailError || this.state.usernameError){console.log(\"failed\")}else{ return this.handleSubmit()}})\n    }\n\n    handleSubmit = () =>{\n        fetch(\"/add-user\", {\n            method:\"post\",\n            headers:{'Content-Type':'application/json'},\n            body: JSON.stringify({\n                \"username\": this.state.username,\n                \"password\": this.state.password,\n                \"hoten\": this.state.hoten,\n                \"email\": this.state.email,\n                \"role\": this.state.role\n            })\n        })\n        .then(()=>window.location.replace(\"http://localhost:3000/admin/user\"))\n    }\n    \n    render(){\n        return(\n            <div style={{textAlign:\"center\"}}>\n                <h1>UpdateUser</h1>\n                <div className='form-group'>\n                    <label style={{fontSize:\"1.3vw\", color:\"white\"}}>Username</label>\n                    <input name='username' className=\"form-control\" type='text' value={this.state.username} onChange={(e)=>this.handleInput(e)}></input>\n                    <div style={{textAlign:\"left\", color:\"red\", fontSize:\"1.2vw\"}}>\n                          {(this.state.usernameError) ? <ErrorIcon /> : null}\n                          {this.state.usernameError}\n                    </div>\n                </div>\n                <div className='form-group'>\n                    <label style={{fontSize:\"1.3vw\", color:\"white\"}}>Password</label>\n                    <input name='password' className=\"form-control\" type='text' value={this.state.password} onChange={(e)=>this.handleInput(e)}></input>\n                    <div style={{textAlign:\"left\", color:\"red\", fontSize:\"1.2vw\"}}>\n                          {(this.state.passwordError) ? <ErrorIcon /> : null}\n                          {this.state.passwordError}\n                    </div>\n                </div>\n                <div className='form-group'>\n                    <label style={{fontSize:\"1.3vw\", color:\"white\"}}>Hoten</label>\n                    <input name='hoten' className=\"form-control\" type='text' value={this.state.hoten} onChange={(e)=>this.handleInput(e)}></input>\n                    <div style={{textAlign:\"left\", color:\"red\", fontSize:\"1.2vw\"}}>\n                          {(this.state.hotenError) ? <ErrorIcon /> : null}\n                          {this.state.hotenError}\n                    </div>\n                </div>\n                <div className='form-group'>\n                    <label style={{fontSize:\"1.3vw\", color:\"white\"}}>Email</label>\n                    <input name='email' className=\"form-control\" type='text' value={this.state.email} onChange={(e)=>this.handleInput(e)}></input>\n                    <div style={{textAlign:\"left\", color:\"red\", fontSize:\"1.2vw\"}}>\n                          {(this.state.emailError) ? <ErrorIcon /> : null}\n                          {this.state.emailError}\n                    </div>\n                </div>\n                <div className=\"form-group\">\n                    <label style={{fontSize:\"1.3vw\", color:\"white\"}}>Vai trò</label>\n                    <select name=\"role\" className=\"form-control\" value={this.state.role} onChange={(e)=>this.handleInput(e)}>\n                        <option></option>\n                        <option>superadmin</option>\n                        <option>admin</option>\n                    </select>\n                    <div style={{textAlign:\"left\", color:\"red\", fontSize:\"1.2vw\"}}>\n                          {(this.state.roleError) ? <ErrorIcon /> : null}\n                          {this.state.roleError}\n                    </div>\n                </div>\n                <div className='form-group'>\n                    <button className='btn btn-danger' onClick={()=>window.location.replace(\"http://localhost:3000/admin/user\")}>Cancel</button>\n                    <button className='btn btn-primary' onClick={()=>this.validClient(this.validServer)}>Update</button>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default UpdateUser;"]},"metadata":{},"sourceType":"module"}