{"ast":null,"code":"import _slicedToArray from \"/Users/DuyNguyen/workspace/ProjectFoodSell-client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/DuyNguyen/workspace/ProjectFoodSell-client/src/component/User-View/ChangePass/ChangePass.js\";\nimport React from \"react\";\nimport ErrorIcon from '@material-ui/icons/Error';\nexport default function ChangePass(props) {\n  const _React$useState = React.useState(\"\"),\n        _React$useState2 = _slicedToArray(_React$useState, 2),\n        newPass = _React$useState2[0],\n        setNewPass = _React$useState2[1];\n\n  const _React$useState3 = React.useState(\"\"),\n        _React$useState4 = _slicedToArray(_React$useState3, 2),\n        confNewPass = _React$useState4[0],\n        setConfNewPass = _React$useState4[1];\n\n  const _React$useState5 = React.useState(\"\"),\n        _React$useState6 = _slicedToArray(_React$useState5, 2),\n        error = _React$useState6[0],\n        setError = _React$useState6[1];\n\n  const _React$useState7 = React.useState(\"\"),\n        _React$useState8 = _slicedToArray(_React$useState7, 2),\n        confirmCode = _React$useState8[0],\n        setConfirmCode = _React$useState8[1];\n\n  const _React$useState9 = React.useState(\"\"),\n        _React$useState10 = _slicedToArray(_React$useState9, 2),\n        errorConfirmCode = _React$useState10[0],\n        setErrorConfirmCode = _React$useState10[1];\n\n  const _React$useState11 = React.useState(\"\"),\n        _React$useState12 = _slicedToArray(_React$useState11, 2),\n        errorConf = _React$useState12[0],\n        setErrorConf = _React$useState12[1];\n\n  const _React$useState13 = React.useState(false),\n        _React$useState14 = _slicedToArray(_React$useState13, 2),\n        verified = _React$useState14[0],\n        setVerified = _React$useState14[1];\n\n  function verify() {\n    fetch(\"/sendconfirmcode\", {\n      method: \"post\",\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        \"confirmcode\": confirmCode\n      })\n    }).then(res => {\n      if (res.status === 200) {\n        setVerified(true);\n      } else {\n        setVerified(false);\n        setErrorConfirmCode(\"Mã xác nhận không đúng\");\n      }\n    });\n  }\n\n  const validConfirmCode = func => {\n    if (confirmCode === \"\") {\n      setErrorConfirmCode(\"Xin hãy nhập mã xác nhận \");\n    } else {\n      return func();\n    }\n  };\n\n  function submit() {\n    fetch(\"/changeforgot\", {\n      method: \"post\",\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        \"email\": props.email,\n        \"username\": props.username,\n        \"password\": confNewPass\n      })\n    }).then(() => props.next());\n  }\n\n  const valid = func => {\n    if (newPass === \"\") {\n      setError(\"Password không được bỏ trống\");\n      return false;\n    } else {\n      setError(\"\");\n    }\n\n    if (confNewPass === \"\") {\n      setErrorConf(\"Xác Nhận Password không được bỏ trống\");\n      return false;\n    } else {\n      setErrorConf(\"\");\n    }\n\n    if (newPass !== confNewPass) {\n      setErrorConf(\"Password và xác nhận Password không giống\");\n      return false;\n    } else {\n      setErrorConf(\"\");\n    }\n\n    return func();\n  };\n\n  return (// (verified === false) \n    // ?   <div className=\"form-group\" style={{padding:\"3vw\", margin:\"0px\"}}>\n    //         <label style={{fontSize:\"1.1vw\", color:\"white\"}}>Bạn hãy nhập mã xác nhận đã được gửi qua email</label>\n    //         <input type=\"text\" className=\"form-control\" value={confirmCode} onChange={(e)=>setConfirmCode(e.target.value)}></input>\n    //         <div style={{fontSize:\"1vw\", color:\"red\"}}>\n    //             {(errorConfirmCode === \"\") ? null : <ErrorIcon /> }\n    //             {errorConfirmCode}\n    //         </div>\n    //         <button style={{marginTop:\"2vw\"}} className=\"btn btn-primary\" onClick={()=>validConfirmCode(verify)}>Tiếp tục</button>\n    //     </div>\n    // :   <div className=\"form-group\" style={{padding:\"3vw\", margin:\"0px\"}}>\n    //         <label style={{fontSize:\"1.1vw\", color:\"white\"}}>Bạn hãy nhập mật khẩu mới</label>\n    //         <input type=\"password\" className=\"form-control\" value={newPass} onChange={(e)=>setNewPass(e.target.value)}></input>\n    //         <div style={{fontSize:\"1vw\", color:\"red\"}}>\n    //             {(error === \"\") ? null : <ErrorIcon /> }\n    //             {error}\n    //         </div>\n    //         <label style={{fontSize:\"1.1vw\", color:\"white\"}}>Xác nhận mật khẩu mới</label>\n    //         <input type=\"password\" className=\"form-control\" value={confNewPass} onChange={(e)=>setConfNewPass(e.target.value)}></input>\n    //         <div style={{fontSize:\"1vw\", color:\"red\"}}>\n    //             {(errorConf === \"\") ? null : <ErrorIcon /> }\n    //             {errorConf}\n    //         </div>\n    //         <button style={{marginTop:\"2vw\"}} className=\"btn btn-success\" onClick={()=>valid(submit)}>Hoàn Thành</button>\n    //     </div>\n    React.createElement(\"div\", {\n      className: \"form-group\",\n      style: {\n        padding: \"3vw\",\n        margin: \"0px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      style: {\n        fontSize: \"1.1vw\",\n        color: \"white\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, \"B\\u1EA1n h\\xE3y nh\\u1EADp m\\u1EADt kh\\u1EA9u m\\u1EDBi\"), React.createElement(\"input\", {\n      type: \"password\",\n      className: \"form-control\",\n      value: newPass,\n      onChange: e => setNewPass(e.target.value),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      style: {\n        fontSize: \"1vw\",\n        color: \"red\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, error === \"\" ? null : React.createElement(ErrorIcon, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }), error), React.createElement(\"label\", {\n      style: {\n        fontSize: \"1.1vw\",\n        color: \"white\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, \"X\\xE1c nh\\u1EADn m\\u1EADt kh\\u1EA9u m\\u1EDBi\"), React.createElement(\"input\", {\n      type: \"password\",\n      className: \"form-control\",\n      value: confNewPass,\n      onChange: e => setConfNewPass(e.target.value),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      style: {\n        fontSize: \"1vw\",\n        color: \"red\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, errorConf === \"\" ? null : React.createElement(ErrorIcon, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }), errorConf), React.createElement(\"button\", {\n      style: {\n        marginTop: \"2vw\",\n        width: \"7vw\"\n      },\n      className: \"btn btn-success\",\n      onClick: () => valid(submit),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, \"Ho\\xE0n Th\\xE0nh\"))\n  );\n}","map":{"version":3,"sources":["/Users/DuyNguyen/workspace/ProjectFoodSell-client/src/component/User-View/ChangePass/ChangePass.js"],"names":["React","ErrorIcon","ChangePass","props","useState","newPass","setNewPass","confNewPass","setConfNewPass","error","setError","confirmCode","setConfirmCode","errorConfirmCode","setErrorConfirmCode","errorConf","setErrorConf","verified","setVerified","verify","fetch","method","headers","body","JSON","stringify","then","res","status","validConfirmCode","func","submit","email","username","next","valid","padding","margin","fontSize","color","e","target","value","marginTop","width"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport ErrorIcon from '@material-ui/icons/Error';\n\nexport default function ChangePass(props){\n    const [newPass, setNewPass] = React.useState(\"\")\n    const [confNewPass, setConfNewPass] = React.useState(\"\")\n    const [error, setError] = React.useState(\"\")\n    const [confirmCode, setConfirmCode] = React.useState(\"\")\n    const [errorConfirmCode, setErrorConfirmCode] = React.useState(\"\")\n    const [errorConf, setErrorConf] = React.useState(\"\")\n    const [verified, setVerified] =React.useState(false)\n\n    function verify(){\n        fetch(\"/sendconfirmcode\", {\n            method:\"post\",\n            headers:{'Content-Type':'application/json'},\n            body:JSON.stringify({\n                \"confirmcode\": confirmCode\n            })\n        })\n        .then((res) => {\n            if(res.status === 200){\n                setVerified(true)\n            }else{\n                setVerified(false)\n                setErrorConfirmCode(\"Mã xác nhận không đúng\")\n            }\n        })\n    }\n    const validConfirmCode = (func) =>{\n        if(confirmCode === \"\"){\n            setErrorConfirmCode(\"Xin hãy nhập mã xác nhận \")\n        }else{\n            return func()\n        }\n        \n    }\n\n    function submit(){\n        fetch(\"/changeforgot\", {\n            method:\"post\",\n            headers:{'Content-Type':'application/json'},\n            body:JSON.stringify({\n                \"email\": props.email,\n                \"username\": props.username,\n                \"password\": confNewPass\n            })\n        })\n        .then(()=>props.next())\n    }\n    \n    const valid = (func)=>{\n        if(newPass === \"\"){\n            setError(\"Password không được bỏ trống\")\n            return false\n        }else{setError(\"\")}\n        if(confNewPass === \"\"){\n            setErrorConf(\"Xác Nhận Password không được bỏ trống\")\n            return false\n        }else{setErrorConf(\"\")}\n        if(newPass !== confNewPass){\n            setErrorConf(\"Password và xác nhận Password không giống\")\n            return false\n        }else{setErrorConf(\"\")}\n        return func()\n    }\n\n    return(\n        // (verified === false) \n        // ?   <div className=\"form-group\" style={{padding:\"3vw\", margin:\"0px\"}}>\n        //         <label style={{fontSize:\"1.1vw\", color:\"white\"}}>Bạn hãy nhập mã xác nhận đã được gửi qua email</label>\n        //         <input type=\"text\" className=\"form-control\" value={confirmCode} onChange={(e)=>setConfirmCode(e.target.value)}></input>\n        //         <div style={{fontSize:\"1vw\", color:\"red\"}}>\n        //             {(errorConfirmCode === \"\") ? null : <ErrorIcon /> }\n        //             {errorConfirmCode}\n        //         </div>\n        //         <button style={{marginTop:\"2vw\"}} className=\"btn btn-primary\" onClick={()=>validConfirmCode(verify)}>Tiếp tục</button>\n        //     </div>\n        // :   <div className=\"form-group\" style={{padding:\"3vw\", margin:\"0px\"}}>\n        //         <label style={{fontSize:\"1.1vw\", color:\"white\"}}>Bạn hãy nhập mật khẩu mới</label>\n        //         <input type=\"password\" className=\"form-control\" value={newPass} onChange={(e)=>setNewPass(e.target.value)}></input>\n        //         <div style={{fontSize:\"1vw\", color:\"red\"}}>\n        //             {(error === \"\") ? null : <ErrorIcon /> }\n        //             {error}\n        //         </div>\n        //         <label style={{fontSize:\"1.1vw\", color:\"white\"}}>Xác nhận mật khẩu mới</label>\n        //         <input type=\"password\" className=\"form-control\" value={confNewPass} onChange={(e)=>setConfNewPass(e.target.value)}></input>\n        //         <div style={{fontSize:\"1vw\", color:\"red\"}}>\n        //             {(errorConf === \"\") ? null : <ErrorIcon /> }\n        //             {errorConf}\n        //         </div>\n        //         <button style={{marginTop:\"2vw\"}} className=\"btn btn-success\" onClick={()=>valid(submit)}>Hoàn Thành</button>\n        //     </div>\n        <div className=\"form-group\" style={{padding:\"3vw\", margin:\"0px\"}}>\n                <label style={{fontSize:\"1.1vw\", color:\"white\"}}>Bạn hãy nhập mật khẩu mới</label>\n                <input type=\"password\" className=\"form-control\" value={newPass} onChange={(e)=>setNewPass(e.target.value)}></input>\n                <div style={{fontSize:\"1vw\", color:\"red\"}}>\n                    {(error === \"\") ? null : <ErrorIcon /> }\n                    {error}\n                </div>\n                <label style={{fontSize:\"1.1vw\", color:\"white\"}}>Xác nhận mật khẩu mới</label>\n                <input type=\"password\" className=\"form-control\" value={confNewPass} onChange={(e)=>setConfNewPass(e.target.value)}></input>\n                <div style={{fontSize:\"1vw\", color:\"red\"}}>\n                    {(errorConf === \"\") ? null : <ErrorIcon /> }\n                    {errorConf}\n                </div>\n                <button style={{marginTop:\"2vw\", width:\"7vw\"}} className=\"btn btn-success\" onClick={()=>valid(submit)}>Hoàn Thành</button>\n            </div>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}